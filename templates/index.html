{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h1 class="text-center mb-4">üí∏ Billionaires Database üí∏</h1>

    <!-- Database Statistics -->
    <section id="db-statistics" class="mb-5">
        <h2>Database Statistics</h2>
        <p>Below is a summary of the total count of rows for each table in the Billionaires database:</p>
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Items</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Billionaires</td>
                    <td>{{ stats.n_Billionaires }}</td>
                </tr>
                <tr>
                    <td>Countries</td>
                    <td>{{ stats.n_Countries }}</td>
                </tr>
                <tr>
                    <td>Cities</td>
                    <td>{{ stats.n_Cities }}</td>
                </tr>
                <tr>
                    <td>States</td>
                    <td>{{ stats.n_States }}</td>
                </tr>
                <tr>
                    <td>Regions</td>
                    <td>{{ stats.n_Regions }}</td>
                </tr>
                <tr>
                    <td>Continents</td>
                    <td>{{ stats.n_Continents }}</td>
                </tr>
                <tr>
                    <td>Companies</td>
                    <td>{{ stats.n_Companies }}</td>
                </tr>
                <tr>
                    <td>Billionaire_Companies</td>
                    <td>{{ stats.n_Billionaire_Companies }}</td>
                </tr>
                <tr>
                    <td>Citizenships</td>
                    <td>{{ stats.n_Citizenships }}</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Analyze Tables Section -->
    <section class="mb-5" id="analyze-selected-tables">
        <div class="d-flex justify-content-between align-items-center">
            <h2>Analyze Tables</h2>
            <button class="btn btn-danger" onclick="resetAnalyzeTables()">Reset All</button>
        </div>
        <p>Explore individual records or perform searches in key tables such as Billionaires, Companies, Countries, and more:</p>

        <!-- Billionaires -->
        <div class="mb-4">
            <h3>Billionaires</h3>
            <a href="/billionaires" class="btn btn-primary mb-2">List All Billionaires</a>
            <form name="billionaireid" class="d-flex mb-2" action="javascript:window.open('/billionaires/'+document.forms['billionaireid'].elements['id'].value,'_self')">
                <input class="form-control me-2" placeholder="Billionaire ID" name="id" type="number" min="1" required />
                <button type="submit" class="btn btn-secondary">Get Info</button>
            </form>
            <form name="billionairesearch" class="d-flex" action="javascript:window.open('/billionaires/search/'+document.forms['billionairesearch'].elements['expr'].value,'_self')">
                <input class="form-control me-2" placeholder="Search (e.g., Elon)" name="expr" id="expr" required />
                <button type="submit" class="btn btn-primary search-button">Search</button>
            </form>
        </div>

        <!-- Companies -->
        <div class="mb-4">
            <h3>Companies</h3>
            <a href="/companies" class="btn btn-primary mb-2">List All Companies</a>
            <form name="companyid" class="d-flex mb-2" action="javascript:window.open('/companies/'+document.forms['companyid'].elements['id'].value,'_self')">
                <input class="form-control me-2" placeholder="Company ID" name="id" type="number" min="1" required />
                <button type="submit" class="btn btn-secondary">Get Info</button>
            </form>
            <form name="companysearch" class="d-flex" action="javascript:window.open('/companies/search/'+document.forms['companysearch'].elements['expr'].value,'_self')">
                <input class="form-control me-2" placeholder="Search (e.g., Tesla)" name="expr" id="expr" required />
                <button type="submit" class="btn btn-primary search-button">Search</button>
            </form>
        </div>

        <!-- Countries -->
        <div class="mb-4">
            <h3>Countries</h3>
            <a href="/countries" class="btn btn-primary mb-2">List All Countries</a>
            <form name="countryid" class="d-flex mb-2" action="javascript:window.open('/countries/'+document.forms['countryid'].elements['id'].value,'_self')">
                <input class="form-control me-2" placeholder="Country ID" name="id" type="number" min="1" required />
                <button type="submit" class="btn btn-secondary">Get Info</button>
            </form>
            <form name="countrysearch" class="d-flex" action="javascript:window.open('/countries/search/'+document.forms['countrysearch'].elements['expr'].value,'_self')">
                <input class="form-control me-2" placeholder="Search (e.g., United Kingdom)" name="expr" id="expr" required />
                <button type="submit" class="btn btn-primary search-button">Search</button>
            </form>
        </div>

        <!-- Cities -->
        <div class="mb-4">
            <h3>Cities</h3>
            <a href="/cities" class="btn btn-primary mb-2">List All Cities</a>
            <form name="cityid" class="d-flex mb-2" action="javascript:window.open('/cities/'+document.forms['cityid'].elements['id'].value,'_self')">
                <input class="form-control me-2" placeholder="City ID" name="id" type="number" min="1" required />
                <button type="submit" class="btn btn-secondary">Get Info</button>
            </form>
            <form name="citysearch" class="d-flex" action="javascript:window.open('/cities/search/'+document.forms['citysearch'].elements['expr'].value,'_self')">
                <input class="form-control me-2" placeholder="Search (e.g., Paris)" name="expr" id="expr" required />
                <button type="submit" class="btn btn-primary search-button">Search</button>
            </form>
        </div>

        <!-- States -->
        <div class="mb-4">
            <h3>States</h3>
            <a href="/states" class="btn btn-primary mb-2">List All States</a>
            <form name="stateid" class="d-flex mb-2" action="javascript:window.open('/states/'+document.forms['stateid'].elements['id'].value,'_self')">
                <input class="form-control me-2" placeholder="State ID" name="id" type="number" min="1" required />
                <button type="submit" class="btn btn-secondary">Get Info</button>
            </form>
            <form name="statesearch" class="d-flex" action="javascript:window.open('/states/search/'+document.forms['statesearch'].elements['expr'].value,'_self')">
                <input class="form-control me-2" placeholder="Search (e.g., Texas)" name="expr" id="expr" required />
                <button type="submit" class="btn btn-primary search-button">Search</button>
            </form>
        </div>
    </section>
    
    <section id="questions" class="mb-5">
        <div class="d-flex justify-content-between align-items-center">
            <h2>Analyze Custom Questions</h2>
            <button class="btn btn-danger" onclick="resetAnalyzeQuestions()">Reset All</button>
        </div>
        <p>Answer specific analytical questions using the database:</p>
        <div class="form-container">
            <form method="POST" action="/1_Question">
                <h5>
                    Quais s√£o as 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-18" required />
                    principais ind√∫strias em n√∫mero de bilion√°rios e qual √© a soma da riqueza acumulada em cada uma?
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/2_Question">
                <h5>
                    Liste os 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-2591" required />
                    bilion√°rios mais jovens, incluindo suas idades, nacionalidade, ind√∫strias e riqueza total.
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/3_Question">
                <h5>
                    Se todos os bilion√°rios de um determinado pa√≠s (de resid√™ncia) doassem 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-100" required />%
                    de sua riqueza para aumentar o PIB do pa√≠s, qual seria o impacto em ppm no PIB? Liste o top 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value2" placeholder="1-2591" required /> 
                    pa√≠ses onde isso teria o maior efeito.
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/4_Question">
                <h5>
                    Qual o top 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-18" required />
                    ind√∫strias mais comuns em pa√≠ses com latitudes entre 
                    <input type="number" step="0.1" class="form-control d-inline dynamic-input mx-1" name="value2" placeholder="-90¬∞ a 90¬∞" required />¬∞ e 
                    <input type="number" step="0.1" class="form-control d-inline dynamic-input mx-1" name="value3" placeholder="-90¬∞ a 90¬∞" required />¬∞?
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/5_Question">
                <h5>
                    Liste o top 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-774" required /> 
                    cidades do 
                    <input type="text" class="form-control d-inline dynamic-input mx-1" name="value2" placeholder="Country" required /> 
                    com mais bilion√°rios.
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/6_Question">
                <h5>
                    Simule a riqueza que cada pessoa de um determinado pa√≠s teria caso todos os bilion√°rios residentes nesse pa√≠s doassem o seu patrim√≥nio e se distribu√≠sse de igual forma pela popula√ß√£o desse mesmo pa√≠s. Liste o top 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-78" required />.
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/7_Question">
                <h5>
                    Quais s√£o os bilion√°rios que residem em pa√≠ses onde a expectativa de vida √© menor do que a sua idade? Liste o top 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-2591" required /> 
                    com o nome, idade, expectativa de vida do pa√≠s e n√∫mero de anos a que j√° v√™m 'desafiando a morte'.
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/8_Question">
                <h5>
                    Quais s√£o os 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-78" required /> 
                    pa√≠ses com os maiores valores de PIB per capita (PIB/popula√ß√£o do pa√≠s) e quantos bilion√°rios vivem em cada um deles?
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/9_Question">
                <h5>
                    Apresente os pa√≠ses onde a escolaridade est√° acima de 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value1" placeholder="1-100" required />% 
                    e possuem pelo menos 
                    <input type="number" class="form-control d-inline dynamic-input mx-1" name="value2" placeholder="1-2591" required /> 
                    bilion√°rios.
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Submit</button>
            </form>
        </div>

        <div class="form-container">
            <form method="POST" action="/10_Question">
                <h5>
                    Qual √© a m√©dia de riqueza e idade dos bilion√°rios agrupados por continente de resid√™ncia?
                </h5>
                <button type="submit" class="btn btn-primary w-100 mt-2">Show answer</button>
            </form>
        </div>
    </section>
    
    <!-- SQL Query Section -->
    <section id="execute-sql" class="mb-5">
        <div class="mb-4">
            <h3>Run SQL Query</h3>
            <form method="POST" action="/run-sql" class="d-flex flex-column">
                <textarea class="form-control mb-2" name="query" rows="5" placeholder="Enter your SQL query here..." required></textarea>
                <button type="submit" class="btn btn-danger">Execute SQL</button>
            </form>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="mb-5">
        <h2>About</h2>
        <p>
            This web application illustrates the use of the Billionaires database. The application is built using 
            <a href="https://docs.python.org/3/library/sqlite3.html" target="_blank">sqlite3</a>, 
            <a href="https://flask.palletsprojects.com" target="_blank">Flask</a>, and 
            <a href="https://jinja.palletsprojects.com" target="_blank">Jinja</a>.
        </p>
    </section>
</div>
{% endblock %}